#!/bin/bash

# configs and dotfile repo should have the same layout!

DOTS_DIR="$PWD/dots" # Set to current dotfiles repo
HOME_DIR="$HOME/"

# Items to move to repo
ITEMS=(
  ".zshenv"
  ".config/bin"
  ".config/cava/config"
  ".config/cava/themes"
  ".config/fastfetch"
  ".config/hypr"
  ".config/kitty"
  ".config/micro/settings.json"
  ".config/micro/systax/hyprlang.yaml"
  ".config/nvim/lua"
  ".config/nvim/init.lua"
  ".config/rofi"
  ".config/swaync"
  ".config/waybar"
  ".config/wlogout"
  ".config/xsettingsd"
  ".config/yazi"
  ".config/zsh/.p10k.zsh"
  ".config/zsh/.zshrc"
  ".config/zsh/aliases.zsh"
)

mkdir -p "$DOTS_DIR"

echo ""
echo "Copying files from '$HOME_DIR' to '$DOTS_DIR'..."
echo ""

for ITEM in "${ITEMS[@]}"; do
  SRC="$HOME_DIR/$ITEM"
  DST="$DOTS_DIR/$ITEM"

  if [ -d "$SRC" ]; then
    mkdir -p "$DST"
    cp -r "$SRC/." "$DST/"
    echo "$ITEM copied!"
  elif [ -f "$SRC" ]; then
    mkdir -p "$(dirname "$DST")"
    cp "$SRC" "$DST"
    echo "$ITEM copied!"
  fi
done

echo ""
echo "Files are updated!"
echo "Run 'git status' inside your repo to see changes."
notify-send "Updated Dotfiles!" "Your configuration has been updated!"
