#!/bin/bash

# configs and dotfile repo should have the same layout!

DOTS_DIR="$HOME/dots" # Set to current dotfiles repo
HOME_DIR="$HOME/"

# Items to move to repo
ITEMS=(
  ".zshenv"
  ".config/bin"
  ".config/themes"
  ".config/cava/config"
  ".config/cava/themes"
  ".config/fastfetch"
  ".config/hypr"
  ".config/kitty"
  ".config/nvim/lua"
  ".config/nvim/init.lua"
  ".config/rofi"
  ".config/swaync"
  ".config/systemd/user/spotify-notify.service"
  ".config/waybar"
  ".config/wlogout"
  ".config/xsettingsd"
  ".config/yazi"
  ".config/zsh/.p10k.zsh"
  ".config/zsh/.zshrc"
  ".config/zsh/aliases.zsh"
  ".config/zsh/env.sh"
)

mkdir -p "$DOTS_DIR"

echo ""
echo "Copying files from '$HOME_DIR' to '$DOTS_DIR'..."
echo ""

for ITEM in "${ITEMS[@]}"; do
  SRC="$HOME_DIR/$ITEM"
  DST="$DOTS_DIR/$ITEM"

  if [ -d "$SRC" ]; then
    mkdir -p "$DST"
    cp -r "$SRC/." "$DST/"
    echo "$ITEM copied!"
  elif [ -f "$SRC" ]; then
    mkdir -p "$(dirname "$DST")"
    cp "$SRC" "$DST"
    echo "$ITEM copied!"
  fi
done

echo ""
echo "Files are updated!"
echo "Run 'git status' inside your repo to see changes."
notify-send -a transient "Config Updated" "Run 'git status' inside $DOTS_DIR to see the changes."
