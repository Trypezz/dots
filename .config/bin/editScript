#!/usr/bin/env bash
set -euo pipefail

SCRIPTS_DIR="$HOME/.config/bin"

# --- ZSH completion output only ---
if [[ "${1:-}" == "--completion-zsh" ]]; then
  cat <<'EOF'
# zsh completion for editScript (generated by editScript itself)

_editScript() {
  local dir="$HOME/.config/bin"
  _files -W "$dir"
}

compdef _editScript editScript
EOF
  exit 0
fi

# --- Normal script behavior ---
if [[ $# -lt 1 ]] || [[ -z "${1:-}" ]]; then
  echo "Please enter filename: editScript <filename>"
  exit 1
fi

name="$1"
target="$SCRIPTS_DIR/$name"

if [[ ! -d "$SCRIPTS_DIR" ]]; then
  echo "No script directory found: $SCRIPTS_DIR"
  exit 1
fi

if [[ ! -e "$target" ]]; then
  echo "File not fount: $target"
  echo "Maybe it does not exist or is named differently"
  exit 1
fi

exec micro "$target"
